<div class="flex items-center justify-center min-h-screen relative overflow-hidden">
  <!--  Esferas brillantes difuminadas -->
  <div class="absolute w-96 h-96 bg-purple-800 rounded-full blur-3xl opacity-30 top-10 left-10 animate-pulse"></div>
  <div class="absolute w-72 h-72 bg-purple-600 rounded-full blur-3xl opacity-20 bottom-20 right-20 animate-pulse"></div>

  <!--  Contenedor con glassmorphism -->
  <div class="relative z-10 bg-white/10 backdrop-blur-xl shadow-2xl rounded-2xl p-8 w-full max-w-md text-white border border-white/20 animate-fade-in max-h-[90vh] overflow-y-auto">
    
    <!--  Avatar flotante -->
    <div class="flex justify-center">
      <div class="w-24 h-24 rounded-full border-4 border-purple-500 shadow-lg flex items-center justify-center bg-purple-600/50">
        <span class="text-4xl"></span>
      </div>
    </div>

    <!-- Título -->
    <h2 class="text-3xl font-bold text-center mt-4 mb-6">Crear Cuenta en <span class="text-purple-400">GameCenter</span></h2>

    <!-- Mensaje de éxito -->
    <div *ngIf="registroExitoso" class="bg-green-500/20 border border-green-500 rounded-lg p-4 mb-4">
      <p class="text-green-300 text-center"> Registro exitoso. Redirigiendo...</p>
    </div>

    <!-- Mensaje de error general -->
    <div *ngIf="mensajeError && !registroExitoso" class="bg-red-500/20 border border-red-500 rounded-lg p-4 mb-4">
      <p class="text-red-300 text-center"> {{ mensajeError }}</p>
    </div>

    <!-- Formulario -->
    <form [formGroup]="formularioRegistro" (ngSubmit)="registrar()" class="space-y-4">
      
      <!-- Nombre -->
      <div>
        <label class="block text-sm text-gray-200 mb-2">Nombre:</label>
        <input 
          type="text" 
          formControlName="nombre"
          placeholder="Tu nombre" 
          [class.is-invalid]="formularioRegistro.get('nombre')?.touched && formularioRegistro.get('nombre')?.invalid"
          class="w-full px-4 py-2 rounded-lg bg-white/20 border border-white/30 focus:ring-2 focus:ring-purple-400 focus:outline-none transition">
        <p *ngIf="formularioRegistro.get('nombre')?.touched && formularioRegistro.get('nombre')?.invalid" 
           class="text-red-300 text-xs mt-1">
          {{ obtenerMensajeError('nombre') }}
        </p>
      </div>

      <!-- Apellidos -->
      <div>
        <label class="block text-sm text-gray-200 mb-2">Apellidos:</label>
        <input 
          type="text" 
          formControlName="apellidos"
          placeholder="Tus apellidos" 
          [class.is-invalid]="formularioRegistro.get('apellidos')?.touched && formularioRegistro.get('apellidos')?.invalid"
          class="w-full px-4 py-2 rounded-lg bg-white/20 border border-white/30 focus:ring-2 focus:ring-purple-400 focus:outline-none transition">
        <p *ngIf="formularioRegistro.get('apellidos')?.touched && formularioRegistro.get('apellidos')?.invalid" 
           class="text-red-300 text-xs mt-1">
          {{ obtenerMensajeError('apellidos') }}
        </p>
      </div>

      <!-- Email -->
      <div>
        <label class="block text-sm text-gray-200 mb-2">Email:</label>
        <input 
          type="email" 
          formControlName="email"
          placeholder="tu@email.com" 
          [class.is-invalid]="formularioRegistro.get('email')?.touched && formularioRegistro.get('email')?.invalid"
          class="w-full px-4 py-2 rounded-lg bg-white/20 border border-white/30 focus:ring-2 focus:ring-purple-400 focus:outline-none transition">
        <p *ngIf="formularioRegistro.get('email')?.touched && formularioRegistro.get('email')?.invalid" 
           class="text-red-300 text-xs mt-1">
          {{ obtenerMensajeError('email') }}
        </p>
      </div>

      <!-- Teléfono -->
      <div>
        <label class="block text-sm text-gray-200 mb-2">Teléfono:</label>
        <input 
          type="tel" 
          formControlName="telefono"
          placeholder="Tu teléfono (ej: +34 123 456 789)" 
          [class.is-invalid]="formularioRegistro.get('telefono')?.touched && formularioRegistro.get('telefono')?.invalid"
          class="w-full px-4 py-2 rounded-lg bg-white/20 border border-white/30 focus:ring-2 focus:ring-purple-400 focus:outline-none transition">
        <p *ngIf="formularioRegistro.get('telefono')?.touched && formularioRegistro.get('telefono')?.invalid" 
           class="text-red-300 text-xs mt-1">
          {{ obtenerMensajeError('telefono') }}
        </p>
      </div>

      <!-- Contraseña -->
      <div>
        <label class="block text-sm text-gray-200 mb-2">Contraseña:</label>
        <div class="relative">
          <input 
            [type]="mostrarPassword ? 'text' : 'password'" 
            formControlName="password"
            placeholder="Mínimo 8 caracteres" 
            [class.is-invalid]="formularioRegistro.get('password')?.touched && formularioRegistro.get('password')?.invalid"
            class="w-full px-4 py-2 rounded-lg bg-white/20 border border-white/30 focus:ring-2 focus:ring-purple-400 focus:outline-none transition">
          <button 
            type="button"
            (click)="alternarVisibilidad()"
            class="absolute right-3 top-2 text-gray-300 hover:text-white transition">
            {{ mostrarPassword ? '' : '' }}
          </button>
        </div>
        <p *ngIf="formularioRegistro.get('password')?.touched && formularioRegistro.get('password')?.invalid" 
           class="text-red-300 text-xs mt-1">
          {{ obtenerMensajeError('password') }}
        </p>
      </div>

      <!-- Confirmar Contraseña -->
      <div>
        <label class="block text-sm text-gray-200 mb-2">Confirmar Contraseña:</label>
        <div class="relative">
          <input 
            [type]="mostrarConfirmarPassword ? 'text' : 'password'" 
            formControlName="confirmPassword"
            placeholder="Repite tu contraseña" 
            [class.is-invalid]="formularioRegistro.get('confirmPassword')?.touched && (formularioRegistro.get('confirmPassword')?.invalid || formularioRegistro.errors?.['contrasenaNoCoincide'])"
            class="w-full px-4 py-2 rounded-lg bg-white/20 border border-white/30 focus:ring-2 focus:ring-purple-400 focus:outline-none transition">
          <button 
            type="button"
            (click)="alternarVisibilidadConfirmar()"
            class="absolute right-3 top-2 text-gray-300 hover:text-white transition">
            {{ mostrarConfirmarPassword ? '' : '' }}
          </button>
        </div>
        <p *ngIf="formularioRegistro.get('confirmPassword')?.touched && formularioRegistro.errors?.['contrasenaNoCoincide']" 
           class="text-red-300 text-xs mt-1">
          Las contraseñas no coinciden
        </p>
      </div>

      <!-- Botón Registrar -->
      <button 
        type="submit"
        [disabled]="cargando || formularioRegistro.invalid || registroExitoso"
        class="w-full py-2 rounded-lg text-white font-semibold bg-purple-600 hover:bg-purple-700 disabled:bg-gray-500 disabled:cursor-not-allowed transition mt-6">
        {{ cargando ? 'Registrando...' : 'Crear Cuenta' }}
      </button>
    </form>

    <!-- Link a Login -->
    <div class="text-center mt-4">
      <p class="text-gray-300">¿Ya tienes cuenta? 
        <a routerLink="/login" class="text-purple-300 hover:underline font-semibold">Inicia sesión aquí</a>
      </p>
    </div>

  </div>
</div>
